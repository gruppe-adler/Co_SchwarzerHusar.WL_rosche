#include "..\component.hpp"

params ["_unit", "_plane"];

if (hasInterface) exitWith {};
_unit allowdamage false;

// put out of plane
_unit setPos (_plane getPos [-20, 180]);

_v1 = (random 20) + 70;
_v1 = (getDir _plane) + (round (random 8) - 4);
_unit setVelocity [_v1 * (sin _v1), _v1 * (cos _v1), -15 ];

private _chute = createVehicle ['NonSteerable_Parachute_F', position _unit,[],0,'Fly'];
_chute setPos position _unit;
_unit moveIndriver _chute; 
_chute allowDamage false;

_unit setVariable ["GRAD_drop_dropped", true];

[{
    isTouchingGround _unit
},{
    params ["_unit"];
    _unit allowdamage true;    
}, [_unit]] call CBA_fnc_waitUntilAndExecute;